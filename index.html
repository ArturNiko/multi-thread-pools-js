<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Vite App</title>
</head>
<body>
<div id="app"></div>
<script type="module">
    import MTPC from "./dist/index.mjs"

    //example part
    async function initializeThreads() {
        window.MTPC = MTPC
        MTPC.initialize(20)
        MTPC.threads.forEach(thread => thread.add(testFunc, testFunc))

        MTPC.threads[0].mode = 'fkarr'
        console.log(MTPC.threads[0].pool)
        console.log(await MTPC.threads[0].run('first run ðŸ¥¸.', 'd'))
        console.log(MTPC.threads[0].pool)




        function testFunc(message, test) {
            const start = performance.now()
            let value = 0
            for (let i = 0; i < 1000000000; i++) value += i

            const lastTime = message.data && message.data.exec_time ? message.data.exec_time :  0
            postMessage({
                exec_time: performance.now() - start + lastTime,
                message: message.data
            })
        }
    }

    initializeThreads().then()


</script>
</body>
</html>
